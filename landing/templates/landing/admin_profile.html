{% extends 'landing/admin/base.html' %}

{% block title %}Admin Profile - Fraud Detection System{% endblock %}

{% block page_title %}Profile{% endblock %}

{% block page_description %}Manage your administrator profile and account settings{% endblock %}

{% block content %}
<!-- Admin Profile Header -->
<div class="max-w-7xl mx-auto px-6 py-8">
    <!-- Page Title and Navigation -->
    

    <!-- Admin Profile Card -->
    <div class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden mb-8">
        <div class="bg-gradient-to-r from-red-600 via-purple-600 to-indigo-700 p-8 text-white">
            <div class="flex items-center space-x-8">
                <div class="w-24 h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-white/30 shadow-xl">
                    <i class="fas fa-user-shield text-4xl"></i>
                </div>
                <div class="flex-1">
                    <h2 class="text-3xl font-bold mb-2">{{ user.first_name|default:user.username }}</h2>
                    <p class="text-white/90 text-lg mb-4">{{ user.email }}</p>
                    <div class="flex items-center space-x-3">
                        <span class="bg-red-500/20 text-white px-4 py-2 rounded-full text-sm font-semibold border border-white/30">
                            <i class="fas fa-crown mr-2"></i>System Administrator
                        </span>
                        {% if user.profile.is_verified %}
                        <span class="bg-green-500/20 text-white px-4 py-2 rounded-full text-sm font-semibold border border-white/30">
                            <i class="fas fa-check-circle mr-2"></i>Verified Account
                        </span>
                        {% endif %}
                        <span class="bg-blue-500/20 text-white px-4 py-2 rounded-full text-sm font-semibold border border-white/30">
                            <i class="fas fa-calendar mr-2"></i>Member since {{ user.date_joined|date:"M Y" }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Statistics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-users text-blue-600 text-xl"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-600">Total Users</p>
                    <p class="text-2xl font-bold text-gray-900">{{ total_users|default:"0" }}</p>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-search text-green-600 text-xl"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-600">Total Predictions</p>
                    <p class="text-2xl font-bold text-gray-900">{{ total_predictions|default:"0" }}</p>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-600">Fraud Detected</p>
                    <p class="text-2xl font-bold text-gray-900">{{ fraud_predictions|default:"0" }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Management Section -->
    <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8 mb-8">
        <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mr-4">
                <i class="fas fa-user-edit text-blue-600 text-xl"></i>
            </div>
            <div>
                <h3 class="text-2xl font-bold text-gray-900">Edit Profile Information</h3>
                <p class="text-gray-600">Update your administrator profile details and account information</p>
            </div>
        </div>

        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <!-- Personal Information -->
            <div class="border-b border-gray-200 pb-6 mb-6">
                <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-user-circle mr-2 text-blue-500"></i>Personal Information
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="first_name" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-user mr-2 text-blue-500"></i>First Name
                        </label>
                        <input type="text" name="first_name" id="first_name" value="{{ user.first_name|default:'' }}" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none transition">
                    </div>
                    
                    <div>
                        <label for="last_name" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-user mr-2 text-blue-500"></i>Last Name
                        </label>
                        <input type="text" name="last_name" id="last_name" value="{{ user.last_name|default:'' }}" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none transition">
                    </div>
                </div>
                
                <div class="mt-6">
                    <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                        <i class="fas fa-envelope mr-2 text-blue-500"></i>Email Address
                    </label>
                    <input type="email" name="email" id="email" value="{{ user.email|default:'' }}" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none transition">
                </div>
            </div>
            
            <!-- Professional Information -->
            <div class="border-b border-gray-200 pb-6 mb-6">
                <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-briefcase mr-2 text-green-500"></i>Professional Information
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="{{ form.phone_number.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-phone mr-2 text-blue-500"></i>Phone Number
                        </label>
                        {{ form.phone_number }}
                        {% if form.phone_number.errors %}
                            <p class="text-sm text-red-600 mt-1">{{ form.phone_number.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <div>
                        <label for="{{ form.company.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-building mr-2 text-purple-500"></i>Company
                        </label>
                        {{ form.company }}
                        {% if form.company.errors %}
                            <p class="text-sm text-red-600 mt-1">{{ form.company.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="mt-6">
                    <label for="{{ form.position.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                        <i class="fas fa-briefcase mr-2 text-green-500"></i>Position
                    </label>
                    {{ form.position }}
                    {% if form.position.errors %}
                        <p class="text-sm text-red-600 mt-1">{{ form.position.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="flex justify-end pt-4">
                <button type="submit" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                    <i class="fas fa-save mr-2"></i>Update Profile
                </button>
            </div>
        </form>
    </div>

    <!-- Account Information -->
    <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8">
        <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4">
                <i class="fas fa-info-circle text-green-600 text-xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-900">Account Information</h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Personal Information Display -->
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-user mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Full Name</span>
                </div>
                <p class="text-gray-900">{{ user.first_name|default:"Not set" }} {{ user.last_name|default:"" }}</p>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-envelope mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Email Address</span>
                </div>
                <p class="text-gray-900">{{ user.email|default:"Not set" }}</p>
            </div>
            
            <!-- Professional Information Display -->
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-phone mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Phone Number</span>
                </div>
                <p class="text-gray-900">{{ user.profile.phone_number|default:"Not provided" }}</p>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-building mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Company</span>
                </div>
                <p class="text-gray-900">{{ user.profile.company|default:"Not specified" }}</p>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-briefcase mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Position</span>
                </div>
                <p class="text-gray-900">{{ user.profile.position|default:"Not specified" }}</p>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-shield-alt mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">User Level</span>
                </div>
                <p class="text-gray-900">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                 {% if user.profile.user_level == 'admin' %}bg-red-100 text-red-800{% else %}bg-blue-100 text-blue-800{% endif %}">
                        <i class="fas {% if user.profile.user_level == 'admin' %}fa-crown{% else %}fa-user{% endif %} mr-1"></i>
                        {{ user.profile.get_user_level_display }}
                    </span>
                </p>
            </div>
            
            <!-- Account Status Display -->
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-calendar mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Member Since</span>
                </div>
                <p class="text-gray-900">{{ user.date_joined|date:"M d, Y" }}</p>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-clock mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Last Login</span>
                </div>
                <p class="text-gray-900">{{ user.last_login|date:"M d, Y H:i"|default:"Never" }}</p>
            </div>
            

            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-user-check mr-2 text-blue-500"></i>
                    <span class="font-semibold text-gray-700">Account Status</span>
                </div>
                <p class="text-gray-900">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                 {% if user.is_active %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
                        <i class="fas {% if user.is_active %}fa-user-check{% else %}fa-user-times{% endif %} mr-1"></i>
                        {% if user.is_active %}Active{% else %}Inactive{% endif %}
                    </span>
                </p>
            </div>
        </div>
    </div>
</div>

<style>
/* Enhanced Form Styling */
.form-section {
    border-bottom: 1px solid #e3e8f0;
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
}

.form-section:last-child {
    border-bottom: none;
    padding-bottom: 0;
    margin-bottom: 0;
}

.section-title {
    display: flex;
    align-items: center;
    font-size: 1.125rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1rem;
}

.section-title i {
    margin-right: 0.5rem;
    font-size: 1.25rem;
}

/* Enhanced Input Styling */
input[type="text"], input[type="email"] {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    color: #374151;
    background-color: #ffffff;
    transition: all 0.2s ease;
}

input[type="text"]:focus, input[type="email"]:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    transform: translateY(-1px);
}

/* Status Badge Styling */
.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.status-badge.verified {
    background-color: #d1fae5;
    color: #065f46;
}

.status-badge.pending {
    background-color: #fef3c7;
    color: #92400e;
}

.status-badge.active {
    background-color: #d1fae5;
    color: #065f46;
}

.status-badge.inactive {
    background-color: #fee2e2;
    color: #991b1b;
}

/* Responsive Design */
@media (max-width: 768px) {
    .grid-cols-1.md\\:grid-cols-2 {
        grid-template-columns: 1fr;
    }
    
    .section-title {
        font-size: 1rem;
    }
    
    input[type="text"], input[type="email"] {
        padding: 0.625rem 0.875rem;
        font-size: 0.8125rem;
    }
}
</style>
{% endblock %}
